#!/usr/bin/env bash
set -euo pipefail

# Abre o console Rails da aplicação Genius360
echo "=== Genius360: Abrindo console Rails ==="

# Verificar se docker-compose está instalado
if ! command -v docker-compose &> /dev/null; then
  echo "Docker Compose não encontrado."
  exit 1
fi

# Verificar se o container web está rodando
if ! docker-compose ps | grep -q "web.*Up"; then
  echo "O container web não está rodando. Iniciando containers..."
  docker-compose up -d
  sleep 5
fi

# Abrir console Rails
docker-compose exec web bundle exec rails console
